@using UI.Data;
@inject NavigationManager NavigationManager;
@inject AuthController Auth;

@code {
    protected override void OnAfterRender(bool firstRender) => EnsureUserIsAuthenticated();

    private void EnsureUserIsAuthenticated()
    {
        var uri = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        if (!Auth.IsLoggedIn && uri != "/login" && uri != "/register")
        {
            NavigationManager.NavigateTo("/Login");
        }
    }
}